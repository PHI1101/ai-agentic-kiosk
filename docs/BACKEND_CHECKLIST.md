# Vercel-Railway μ—°λ™ λ¬Έμ  ν•΄κ²° μ²΄ν¬λ¦¬μ¤νΈ

Vercelκ³Ό Railway λ°°ν¬ ν›„ μ—°λ™μ΄ λμ§€ μ•μ„ λ• μ•„λ ν•­λ©λ“¤μ„ μμ„λ€λ΅ ν™•μΈν•΄ λ³΄μ„Έμ”.

### π¨ κ°€μ¥ λ¨Όμ € ν™•μΈν•  κ²ƒ: `vercel.json` μ„¤μ • μ¤λ¥

κ°€μ¥ κ°€λ¥μ„±μ΄ λ†’μ€ μ›μΈμ€ `vercel.json`μ `rewrites` κ·μΉ™μ΄ μλ» μ„¤μ •λ κ²ƒμ…λ‹λ‹¤. API κ²½λ΅κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λλ„λ΅ μμ •ν•΄μ•Ό ν•©λ‹λ‹¤.

1.  **`vercel.json` νμΌ μ—΄κΈ°**
2.  **μ•„λ λ‚΄μ©μΌλ΅ μ™„μ „ν κµμ²΄ν•κΈ°**:
    κΈ°μ΅΄ `destination`μ— λΉ μ Έμλ `/api` κ²½λ΅λ¥Ό μ¶”κ°€ν–μµλ‹λ‹¤.

    ```json
    {
      "rewrites": [
        {
          "source": "/api/:path*",
          "destination": "$RAILWAY_BACKEND_URL/api/:path*"
        }
      ]
    }
    ```
3.  **λ³€κ²½μ‚¬ν•­ μ»¤λ°‹ λ° Vercel μ¬λ°°ν¬**: μμ •λ `vercel.json`μ„ GitHubμ— ν‘Έμ‹ν•κ³ , Vercel λ€μ‹λ³΄λ“μ—μ„ ν”„λ΅μ νΈλ¥Ό λ‹¤μ‹ λ°°ν¬(Redeploy)ν•μ„Έμ”.

---

### 1. Vercel μ„¤μ • ν™•μΈ

-   [ ] **`RAILWAY_BACKEND_URL` ν™κ²½ λ³€μκ°€ μ •ν™•ν•κ°€?**
    -   Vercel ν”„λ΅μ νΈ > Settings > Environment Variables λ©”λ‰΄λ΅ μ΄λ™ν•μ„Έμ”.
    -   `RAILWAY_BACKEND_URL` λ³€μκ°€ μλ”μ§€, κ°’μ€ Railwayμ—μ„ μ κ³µν• λ°±μ—”λ“ URLκ³Ό μ •ν™•ν μΌμΉν•λ”μ§€ ν™•μΈν•μ„Έμ”. (μ: `https://my-backend-123.up.railway.app`)
    -   URL λμ— `/`κ°€ ν¬ν•¨λμ§€ μ•μ•λ”μ§€ ν™•μΈν•μ„Έμ”.

-   [ ] **μµμ‹  λ³€κ²½μ‚¬ν•­μ΄ λ°°ν¬λμ—λ”κ°€?**
    -   Vercel ν”„λ΅μ νΈ λ€μ‹λ³΄λ“μ—μ„ λ§μ§€λ§‰ λ°°ν¬κ°€ `vercel.json` μμ •μ‚¬ν•­μ„ ν¬ν•¨ν• μµμ‹  μ»¤λ°‹μΈμ§€ ν™•μΈν•μ„Έμ”.
    -   ν™•μ‹¤ν•μ§€ μ•λ‹¤λ©΄ **Redeploy** λ²„νΌμ„ λλ¬ μλ™μΌλ΅ λ‹¤μ‹ λ°°ν¬ν•μ„Έμ”.

### 2. Railway λ°±μ—”λ“ μ„¤μ • ν™•μΈ

-   [ ] **Railway λ°°ν¬κ°€ μ„±κ³µμ μΌλ΅ μ‹¤ν–‰ μ¤‘μΈκ°€?**
    -   Railway ν”„λ΅μ νΈ λ€μ‹λ³΄λ“μ—μ„ λ°°ν¬ λ΅κ·Έ(Deploy Logs)μ— μ—λ¬κ°€ μ—†λ”μ§€ ν™•μΈν•μ„Έμ”.
    -   "Active" λλ” "Success" μƒνƒμΈμ§€ ν™•μΈν•μ„Έμ”.

-   [ ] **λ°±μ—”λ“ URLλ΅ μ§μ ‘ μ ‘μ†μ΄ κ°€λ¥ν•κ°€?**
    -   Railwayμ—μ„ μ κ³µν• λ°±μ—”λ“ URL(μ: `https://my-backend-123.up.railway.app/api/orders/process-command/`)λ΅ μ§μ ‘ μ ‘μ†ν–μ„ λ•, Djangoμ 404 νμ΄μ§€λ‚ μ—λ¬ λ©”μ‹μ§€κ°€ μ•„λ‹, μ •μƒμ μΈ μ‘λ‹µ(λλ” DRFμ API νƒμƒ‰ ν™”λ©΄)μ΄ λ‚μ¤λ”μ§€ ν™•μΈν•μ„Έμ”.
    -   λ§μ•½ "Application Error" λ“±μ΄ ν‘μ‹λλ‹¤λ©΄ λ°±μ—”λ“ μ½”λ“λ‚ μ„¤μ • μμ²΄μ— λ¬Έμ κ°€ μλ” κ²ƒμ…λ‹λ‹¤. Railwayμ λ΅κ·Έλ¥Ό ν™•μΈν•μ„Έμ”.

### 3. λ°±μ—”λ“ μ½”λ“ (`settings.py`) ν™•μΈ

-   [ ] **`CORS_ALLOW_ALL_ORIGINS = True` μΈκ°€?**
    -   `backend/config/settings.py` νμΌμ— μ΄ μ„¤μ •μ΄ `True`λ΅ λμ–΄ μλ”μ§€ ν™•μΈν•μ„Έμ”. μ—°λ™ ν…μ¤νΈ μ¤‘μ—λ” CORS λ¬Έμ λ¥Ό κ°€μ¥ ν™•μ‹¤ν•κ² ν”Όν•  μ μμµλ‹λ‹¤.

-   [ ] **`ALLOWED_HOSTS`μ— Vercel λ„λ©”μΈμ΄ ν¬ν•¨λμ–΄ μλ”κ°€?**
    -   `ALLOWED_HOSTS = ['.railway.app', 'ai-agentic-kiosk.vercel.app']` μ™€ κ°™μ΄ Vercel μ•±μ λ„λ©”μΈ μ£Όμ†κ°€ ν¬ν•¨λμ–΄ μλ”μ§€ ν™•μΈν•μ„Έμ”.

---

μ„ ν•­λ©λ“¤μ„ λ¨λ‘ ν™•μΈν• ν›„μ—λ„ λ¬Έμ κ°€ ν•΄κ²°λμ§€ μ•μΌλ©΄, Vercel λ°°ν¬ λ΅κ·Έμ™€ Railway λ°±μ—”λ“ λ΅κ·Έμ—μ„ κµ¬μ²΄μ μΈ μ—λ¬ λ©”μ‹μ§€λ¥Ό ν™•μΈν•λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤.
